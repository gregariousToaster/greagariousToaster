"use strict";angular.module("snippit",["snippit.main","snippit.services","snippit.three","snippit.auth","ui.router"]).run(["$rootScope","$location","$http",function(t,e,n){t.$on("$stateChangeStart",function(t,o,a){n.get("/auth/isAuthenticated").success(function(t){t.auth||e.path("/signin")})})}]).config(["$stateProvider","$urlRouterProvider",function(t,e){t.state("app",{url:"/app",templateUrl:"templates/main.html",controller:"MainController",authenticate:!0}).state("app.three",{url:"/three",views:{nest:{templateUrl:"templates/three.html",controller:"ThreeController"}}}).state("signin",{url:"/signin",templateUrl:"templates/signin.html",controller:"AuthController"}),e.otherwise("/app/three")}]),angular.module("snippit.auth",["snippit"]).controller("AuthController",["$scope","$window",function(t,e,n){}]),angular.module("snippit.main",["snippit"]).controller("MainController",["$scope",function(t){}]),angular.module("snippit.services",["snippit"]).factory("ThreeFactory",function(){var t=function(t,e,n,o){var a=document.createElement("div");a.className="element";var i=document.createElement("img");i.src=e[t].source,a.appendChild(i);var r=new THREE.CSS3DObject(a);r.position.x=4e3*Math.random()-2e3,r.position.y=4e3*Math.random()-2e3,r.position.z=4e3*Math.random()-2e3,n.add(r),o.push(r)},e=function(t,e,n){var o=new THREE.Object3D;o.position.x=e%t*140-280,o.position.y=-(180*(Math.floor(e/t)+1))+540,n.push(o)},n=function(t,e,n,o,a){var i=Math.acos(-1+2*t/a),r=Math.sqrt(a*Math.PI)*i,s=new THREE.Object3D;s.position.x=o*Math.cos(r)*Math.sin(i),s.position.y=o*Math.sin(r)*Math.sin(i),s.position.z=o*Math.cos(i),e.copy(s.position).multiplyScalar(2),s.lookAt(e),n.push(s)},o=function(t,e,n,o,a,i,r,s,l){var p=new THREE.Object3D,c=e*a+e%t/t*2*Math.PI;p.position.x=r*Math.sin(c),p.position.y=-(e*l)+i,p.position.z=s*Math.cos(c),n.x=2*p.position.x,n.y=p.position.y,n.z=2*p.position.z,p.lookAt(n),o.push(p)},a=function(t,e,n){var o=new THREE.Object3D;o.position.x=e%t*400-800,o.position.y=400*-(Math.floor(e/t)%t)+800,o.position.z=1e3*Math.floor(e/(t*t))-2e3,n.push(o)};return{createScene:t,table:e,sphere:n,helix:o,grid:a}}),angular.module("snippit.three",["snippit"]).controller("ThreeController",["$scope","ThreeFactory","$window","$document",function(t,e,n,o){var a,i,r;t.objects=[],t.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]};var s=function(){r=new THREE.PerspectiveCamera(30,n.innerWidth/(n.innerHeight-200),1,1e4),r.position.z=800,a=new THREE.Scene;for(var o=new THREE.Vector3,s=data.photos.data.concat(data.photos.data).concat(data.photos.data).concat(data.photos.data).length,l=0;s>l;l++)e.createScene(l,data.photos.data.concat(data.photos.data).concat(data.photos.data).concat(data.photos.data),a,t.objects),e.table(5,l,t.targets.table),e.sphere(l,o,t.targets.sphere,800,s),e.helix(1,l,o,t.targets.helix,.175,450,900,900,8),e.helix(2,l,o,t.targets.doubleHelix,.175,450,500,500,50),e.helix(3,l,o,t.targets.tripleHelix,.1,450,500,500,50),e.grid(5,l,t.targets.grid);console.log("TARGETS",t.targets),i=new THREE.CSS3DRenderer,i.setSize(n.innerWidth,n.innerHeight-200),i.domElement.style.position="absolute",t.transform(t.targets.table,2e3),document.getElementById("container").appendChild(i.domElement),window.controls=new THREE.OrbitControls(r,i.domElement),window.controls.damping=.2,window.controls.addEventListener("change",t.render)};t.transform=function(e,n){TWEEN.removeAll();for(var o=0;o<t.objects.length;o++){var a=t.objects[o],i=e[o];new TWEEN.Tween(a.position).to({x:i.position.x,y:i.position.y,z:i.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(a.rotation).to({x:i.rotation.x,y:i.rotation.y,z:i.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(t.render).start()};var l=function(){requestAnimationFrame(l),TWEEN.update(),window.controls.update()};angular.element(document).ready(function(){s(),l()}),t.render=function(){i.render(a,r)}}]);